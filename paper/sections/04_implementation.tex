\section{Implementation Details in MICM}
\label{sec:implementation}

This section documents the implementation path from solver build-time wiring to per-step runtime assembly in MICM \citep{micm_repo,micm_docs}.
The symbols follow \cref{sec:formulation}: state $c$, mass matrix $M$, right-hand side $\widetilde{F}$, Jacobian $J=\partial\widetilde{F}/\partial c$, and Rosenbrock increments $k^{(r)}$.

\subsection{Build-Time Pipeline}
\begin{enumerate}[leftmargin=*]
  \item Build kinetic process terms and baseline Jacobian sparsity.
  \item Build constraint structures and identify algebraic row IDs.
  \item Prune kinetic contributions to algebraic rows.
  \item Merge constraint Jacobian sparsity into the global sparsity pattern.
  \item Build species-sized solver matrices and mass-matrix diagonals.
\end{enumerate}

\subsection{Runtime Stage Assembly}
Per accepted or rejected step, MICM assembles:
\begin{enumerate}[leftmargin=*]
  \item Forcing vector $\widetilde{F}(c_n)$ from kinetics plus row-replacement constraint residuals $g(c_n)$.
  \item Jacobian $J_n$ from kinetics plus row-replacement constraint Jacobian rows.
  \item Rosenbrock stage systems
  \[
    (\alpha_r M - J_n)\,k^{(r)} = r^{(r)},
  \]
  with stage-dependent right-hand sides $r^{(r)}$ built from previously computed stages.
\end{enumerate}

\subsection{Implementation Notes to Expand}
\begin{itemize}[leftmargin=*]
  \item Add exact code references for `SolverBuilder`, `ProcessSet`, and `ConstraintSet`.
  \item Add reordered-state mapping details and invariants.
  \item Add scalar vs vectorized code-path parity checks.
\end{itemize}
